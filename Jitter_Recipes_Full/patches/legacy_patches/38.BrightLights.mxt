max v2;#N vpatcher 13 44 660 462;#P origin 0 -1;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P comment 457 200 109 196617 SHADER PARAMETERS;#P newex 283 169 48 196617 loadbang;#P comment 272 383 50 196617 <--magic;#P message 283 191 43 196617 1. \, bang;#P comment 293 354 50 196617 multiplier;#P flonum 259 353 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 223 353 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P message 444 247 44 196617 fade \$1;#P message 390 247 53 196617 radius \$1;#P newex 151 291 199 196617 jit.gl.texture foo @dim 640 480 @adapt 0;#P newex 151 214 105 196617 jit.matrix 4 char 1 1;#P flonum 580 218 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 538 218 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 390 287 76 196617 prepend param;#P newex 580 241 41 196617 * 480.;#P newex 538 241 41 196617 * 640.;#P flonum 444 218 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 496 263 95 196617 pak spot 0. 0.;#P flonum 390 218 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P message 117 291 30 196617 read;#P flonum 138 47 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P user jit.fpsgui 43 216 60 196617 0;#N vpatcher 10 435 628 821;#P origin 0 -35;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P comment 71 291 111 196617 scale quads using image;#P comment 68 257 115 196617 generate centered quads;#P comment 304 181 45 196617 multiply;#P window linecount 2;#P comment 260 119 92 196617 apply threshold and offset;#P window linecount 1;#P comment 253 87 100 196617 downsample and flip;#P newex 45 58 27 196617 t b l;#P inlet 574 40 15 0;#P inlet 557 40 15 0;#P newex 354 179 230 196617 jit.op @op * @val 0.3;#P window linecount 2;#P newex 354 84 193 196617 jit.matrix 1 float32 40 40 @usesrcdim 1 @srcdimstart 0 479 @srcdimend 639 0;#P window linecount 1;#P newex 354 159 114 196617 jit.op @op max @val 0.;#P newex 354 138 213 196617 jit.op @op -;#P newex 354 118 213 196617 jit.op @op >p;#P newex 354 64 66 196617 jit.rgb2luma;#P inlet 45 40 15 0;#P newex 45 340 422 196617 jit.gl.mesh foo @draw_mode quads @blend_enable 1 @color 1. 1. 1. 1. @transform_reset 2;#P newex 45 197 223 196617 jit.expr @expr "snorm[0]" "snorm[1]" 0. 0. 0.;#P newex 45 177 130 196617 jit.matrix 5 float32 40 40;#P inlet 21 40 15 0;#P comment 253 66 100 196617 convert to greyscale;#P newex 183 289 181 196617 jit.op @op * * pass pass pass;#P newex 45 311 148 196617 jit.op @op +;#P newex 45 217 136 196617 jit.matrix 5 float32 160 40;#P window linecount 2;#P newex 183 256 319 196617 jit.expr @expr "(cell[0]%4.>0.)*(cell[0]%4.<3.)-0.5" "(cell[0]%4>1)-0.5" "0." "(cell[0]%4.>0.)*(cell[0]%4.<3.)" "(cell[0]%4>1)";#P connect 9 0 18 0;#P connect 18 0 6 0;#P connect 6 0 7 0;#P connect 7 0 1 0;#P connect 1 0 2 0;#P connect 2 0 8 0;#P fasten 5 0 8 0 26 334 50 334;#P fasten 1 0 0 0 50 251 188 251;#P connect 0 0 3 0;#P connect 3 0 2 1;#P fasten 18 1 10 0 67 77 226 77 226 61 359 61;#P connect 10 0 14 0;#P connect 14 0 11 0;#P connect 11 0 12 0;#P connect 12 0 13 0;#P connect 13 0 15 0;#P connect 15 0 3 1;#P connect 16 0 11 1;#P connect 16 0 12 1;#P connect 17 0 15 1;#P pop 1;#P newobj 151 380 120 196617 p pieces_parts;#P hidden newex 510 84 106 196617 bgcolor 190 190 180;#P user panel 608 31 8 47;#X brgb 43 131 255;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 596 31 13 47;#X brgb 255 241 24;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P comment 460 63 120 196617 andrewb@cycling74.com;#P window setfont "Sans Serif" 24.;#P comment 433 34 148 196632 BrightLights;#P user panel 580 31 17 47;#X brgb 232 109 0;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 416 31 166 47;#X brgb 223 244 255;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P window setfont "Sans Serif" 9.;#P message 57 92 33 196617 close;#P message 26 92 30 196617 open;#P user jit.pwindow 42 148 82 62 0 0 0 0 1 0;#P newex 212 130 146 196617 jit.window foo @size 640 480;#P newex 127 149 231 196617 jit.gl.render foo @erase_color 0.05 0.03 0.01 1.;#P newex 127 108 58 196617 t b b erase;#P toggle 91 30 33 0;#P newex 91 72 57 196617 qmetro 33;#P newex 26 122 98 196617 jit.qt.grab 640 480;#P window linecount 2;#P newex 151 320 233 196617 jit.gl.slab foo @file ab.spotmask.jxs @param spot 320. 240. @param radius 100. @param fade 60.;#P window linecount 1;#P comment 177 354 48 196617 threshold;#P window linecount 6;#P comment 257 214 100 196617 here we are just making a big white texture for each "light". You can substitute any image or color here.;#P fasten 4 0 3 0 96 117 31 117;#P fasten 11 0 3 0 62 114 31 114;#P connect 10 0 3 0;#P fasten 3 0 9 0 31 144 48 144;#P fasten 7 0 20 0 132 212 48 212;#P connect 5 0 4 0;#P fasten 4 0 6 0 96 104 132 104;#P connect 6 0 7 0;#P fasten 6 2 7 0 180 130 132 130;#P connect 21 0 4 1;#P fasten 38 0 31 0 288 209 156 209;#P connect 6 1 31 0;#P connect 31 0 32 0;#P connect 32 0 2 0;#P fasten 28 0 2 0 395 312 156 312;#P fasten 22 0 2 0 122 314 156 314;#P connect 2 0 19 0;#P fasten 3 0 19 1 31 375 192 375;#P connect 35 0 19 2;#P connect 36 0 19 3;#P connect 40 0 38 0;#P connect 23 0 33 0;#P fasten 24 0 28 0 501 283 395 283;#P connect 33 0 28 0;#P fasten 34 0 28 0 449 268 395 268;#P connect 25 0 34 0;#P connect 29 0 26 0;#P connect 26 0 24 1;#P connect 30 0 27 0;#P connect 27 0 24 2;#P pop;